helm repo add haproxytech https://haproxytech.github.io/helm-charts
helm repo update


helm install haproxy-kubernetes-ingress haproxytech/kubernetes-ingress \
  --create-namespace \
  --namespace haproxy-controller


kubectl get service haproxy-kubernetes-ingress --namespace haproxy-controller








Install with preset NodePort values 

By default, the ingress controller creates a Kubernetes service that assigns random NodePort ports. 

In the example below, the ingress controller listens on port 30706 for HTTP traffic and 30675 for HTTPS traffic. Port 31441 publishes the HAProxy Stats page.

kubectl get service haproxy-kubernetes-ingress --namespace haproxy-controller





$ kubectl get service haproxy-kubernetes-ingress --namespace haproxy-controller
NAME                         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                                     AGE
haproxy-kubernetes-ingress   NodePort    10.97.154.7      <none>        80:30706/TCP,443:30675/TCP,1024:31441/TCP   32s
$







$
$ curl myapp.example.com:30979
Hello, world!
Version: 1.0.0
Hostname: helloapp1-7d6c6f6675-ghz2d
$




You can choose specific NodePort ports instead by setting the controller.service.nodePort.http, controller.service.nodePort.https, and controller.service.nodePort.stat Helm chart fields.

helm install haproxy-kubernetes-ingress haproxytech/kubernetes-ingress \
  --create-namespace \
  --namespace haproxy-controller \
  --set controller.service.nodePorts.http=30000 \
  --set controller.service.nodePorts.https=30001 \
  --set controller.service.nodePorts.stat=30002 \
  --set controller.service.nodePorts.prometheus=30003
